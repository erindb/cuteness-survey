var allData = {"trials":[{"animal":"puppy","imageFile":"puppy0.jpg","position":"left","trialStartTime":2876,"clickTime":4047,"rt":1171},{"animal":"puppy","imageFile":"puppy1.jpg","position":"right","trialStartTime":4559,"clickTime":5330,"rt":771},{"animal":"puppy","imageFile":"puppy2.jpg","position":"left","trialStartTime":5839,"clickTime":6515,"rt":676}],"events":[{"type":"keyup","keyCode":82,"key":"R","time":19},{"type":"keyup","keyCode":17,"key":"\u0011","time":34},{"type":"position","x":0,"y":0,"time":66},{"type":"position","x":0,"y":0,"time":117},{"type":"position","x":0,"y":0,"time":168},{"type":"position","x":0,"y":0,"time":220},{"type":"position","x":0,"y":0,"time":271},{"type":"position","x":0,"y":0,"time":322},{"type":"position","x":0,"y":0,"time":373},{"type":"position","x":0,"y":0,"time":425},{"type":"position","x":0,"y":0,"time":476},{"type":"position","x":0,"y":0,"time":527},{"type":"position","x":0,"y":0,"time":578},{"type":"position","x":0,"y":0,"time":630},{"type":"position","x":0,"y":0,"time":681},{"type":"position","x":0,"y":0,"time":732},{"type":"position","x":0,"y":0,"time":783},{"type":"position","x":0,"y":0,"time":834},{"type":"position","x":0,"y":0,"time":886},{"type":"position","x":0,"y":0,"time":937},{"type":"position","x":0,"y":0,"time":988},{"type":"position","x":0,"y":0,"time":1039},{"type":"position","x":0.491875,"y":0.011656952539550375,"time":1091},{"type":"position","x":0.563125,"y":0.0749375520399667,"time":1142},{"type":"position","x":0.583125,"y":0.09492089925062448,"time":1193},{"type":"position","x":0.608125,"y":0.12489592006661115,"time":1245},{"type":"position","x":0.616875,"y":0.1498751040799334,"time":1296},{"type":"position","x":0.609375,"y":0.17485428809325562,"time":1347},{"type":"position","x":0.593125,"y":0.20982514571190675,"time":1398},{"type":"position","x":0.581875,"y":0.2414654454621149,"time":1450},{"type":"position","x":0.576875,"y":0.2681099084096586,"time":1501},{"type":"position","x":0.570625,"y":0.2997502081598668,"time":1552},{"type":"position","x":0.565625,"y":0.3047460449625312,"time":1603},{"type":"position","x":0.545625,"y":0.3130724396336386,"time":1654},{"type":"position","x":0.531875,"y":0.3263946711074105,"time":1706},{"type":"position","x":0.521875,"y":0.34138218151540384,"time":1757},{"type":"position","x":0.518125,"y":0.3463780183180683,"time":1808},{"type":"position","x":0.509375,"y":0.3547044129891757,"time":1859},{"type":"position","x":0.503125,"y":0.3597002497918401,"time":1911},{"type":"position","x":0.496875,"y":0.36636136552872606,"time":1963},{"type":"position","x":0.493125,"y":0.3713572023313905,"time":2013},{"type":"position","x":0.491875,"y":0.37468776019983346,"time":2064},{"type":"position","x":0.490625,"y":0.37801831806827646,"time":2116},{"type":"position","x":0.488125,"y":0.38634471273938387,"time":2167},{"type":"position","x":0.488125,"y":0.38634471273938387,"time":2219},{"type":"position","x":0.488125,"y":0.38634471273938387,"time":2270},{"type":"position","x":0.488125,"y":0.38634471273938387,"time":2321},{"type":"click","x":0.488125,"y":0.38634471273938387,"time":2366},{"type":"click","x":0.488125,"y":0.38634471273938387,"time":2376},{"type":"position","x":0.488125,"y":0.38634471273938387,"time":2380},{"type":"position","x":0.488125,"y":0.38634471273938387,"time":2431},{"type":"position","x":0.488125,"y":0.38634471273938387,"time":2483},{"type":"position","x":0.488125,"y":0.38634471273938387,"time":2534},{"type":"position","x":0.488125,"y":0.38634471273938387,"time":2585},{"type":"position","x":0.488125,"y":0.38634471273938387,"time":2636},{"type":"position","x":0.488125,"y":0.38634471273938387,"time":2688},{"type":"position","x":0.488125,"y":0.38634471273938387,"time":2739},{"type":"position","x":0.488125,"y":0.38634471273938387,"time":2790},{"type":"position","x":0.488125,"y":0.38634471273938387,"time":2841},{"type":"position","x":0.488125,"y":0.38634471273938387,"time":2892},{"type":"position","x":0.488125,"y":0.38634471273938387,"time":2944},{"type":"position","x":0.488125,"y":0.38634471273938387,"time":2995},{"type":"position","x":0.488125,"y":0.38634471273938387,"time":3046},{"type":"position","x":0.488125,"y":0.38634471273938387,"time":3097},{"type":"position","x":0.488125,"y":0.38634471273938387,"time":3149},{"type":"position","x":0.488125,"y":0.38634471273938387,"time":3200},{"type":"position","x":0.488125,"y":0.38634471273938387,"time":3251},{"type":"position","x":0.488125,"y":0.38634471273938387,"time":3302},{"type":"position","x":0.488125,"y":0.38634471273938387,"time":3354},{"type":"position","x":0.484375,"y":0.38467943380516234,"time":3405},{"type":"position","x":0.475625,"y":0.37635303913405493,"time":3456},{"type":"position","x":0.455625,"y":0.3630308076602831,"time":3507},{"type":"position","x":0.435625,"y":0.3447127393838468,"time":3560},{"type":"position","x":0.418125,"y":0.324729392173189,"time":3613},{"type":"position","x":0.408125,"y":0.3180682764363031,"time":3664},{"type":"position","x":0.390625,"y":0.31140716069941715,"time":3715},{"type":"position","x":0.369375,"y":0.3080766028309742,"time":3767},{"type":"position","x":0.349375,"y":0.29308909242298087,"time":3820},{"type":"position","x":0.344375,"y":0.28309741881765194,"time":3872},{"type":"position","x":0.344375,"y":0.28309741881765194,"time":3923},{"type":"position","x":0.344375,"y":0.28309741881765194,"time":3974},{"type":"position","x":0.344375,"y":0.28309741881765194,"time":4026},{"type":"click","x":0.344375,"y":0.28309741881765194,"time":4060},{"type":"position","x":0.344375,"y":0.28309741881765194,"time":4079},{"type":"position","x":0.344375,"y":0.28309741881765194,"time":4130},{"type":"position","x":0.344375,"y":0.28309741881765194,"time":4181},{"type":"position","x":0.344375,"y":0.28309741881765194,"time":4232},{"type":"position","x":0.344375,"y":0.28309741881765194,"time":4284},{"type":"position","x":0.344375,"y":0.28476269775187346,"time":4335},{"type":"position","x":0.345625,"y":0.28476269775187346,"time":4388},{"type":"position","x":0.346875,"y":0.28476269775187346,"time":4439},{"type":"position","x":0.353125,"y":0.28642797668609493,"time":4490},{"type":"position","x":0.363125,"y":0.28975853455453787,"time":4545},{"type":"position","x":0.370625,"y":0.29142381348875934,"time":4596},{"type":"position","x":0.370625,"y":0.29142381348875934,"time":4648},{"type":"position","x":0.370625,"y":0.29142381348875934,"time":4699},{"type":"position","x":0.464375,"y":0.3080766028309742,"time":4751},{"type":"position","x":0.494375,"y":0.3064113238967527,"time":4802},{"type":"position","x":0.538125,"y":0.2980849292256453,"time":4853},{"type":"position","x":0.578125,"y":0.29142381348875934,"time":4904},{"type":"position","x":0.609375,"y":0.28975853455453787,"time":4956},{"type":"position","x":0.650625,"y":0.28309741881765194,"time":5010},{"type":"position","x":0.678125,"y":0.279766860949209,"time":5062},{"type":"position","x":0.699375,"y":0.27310574521232306,"time":5118},{"type":"position","x":0.715625,"y":0.2681099084096586,"time":5170},{"type":"position","x":0.714375,"y":0.2681099084096586,"time":5221},{"type":"position","x":0.714375,"y":0.2681099084096586,"time":5272},{"type":"position","x":0.715625,"y":0.2681099084096586,"time":5329},{"type":"click","x":0.715625,"y":0.2681099084096586,"time":5339},{"type":"position","x":0.715625,"y":0.2681099084096586,"time":5381},{"type":"position","x":0.715625,"y":0.2681099084096586,"time":5433},{"type":"position","x":0.715625,"y":0.2681099084096586,"time":5484},{"type":"position","x":0.714375,"y":0.2681099084096586,"time":5536},{"type":"position","x":0.714375,"y":0.2697751873438801,"time":5588},{"type":"position","x":0.714375,"y":0.2697751873438801,"time":5639},{"type":"position","x":0.710625,"y":0.2714404662781016,"time":5690},{"type":"position","x":0.699375,"y":0.27643630308076605,"time":5745},{"type":"position","x":0.679375,"y":0.28309741881765194,"time":5797},{"type":"position","x":0.661875,"y":0.2880932556203164,"time":5848},{"type":"position","x":0.656875,"y":0.28975853455453787,"time":5899},{"type":"position","x":0.605625,"y":0.2980849292256453,"time":5951},{"type":"position","x":0.569375,"y":0.2997502081598668,"time":6002},{"type":"position","x":0.518125,"y":0.2997502081598668,"time":6056},{"type":"position","x":0.466875,"y":0.28642797668609493,"time":6108},{"type":"position","x":0.416875,"y":0.27310574521232306,"time":6161},{"type":"position","x":0.389375,"y":0.26477935054121565,"time":6213},{"type":"position","x":0.329375,"y":0.25645295587010825,"time":6264},{"type":"position","x":0.299375,"y":0.2531223980016653,"time":6316},{"type":"position","x":0.294375,"y":0.2514571190674438,"time":6367},{"type":"position","x":0.291875,"y":0.2514571190674438,"time":6418},{"type":"position","x":0.293125,"y":0.2514571190674438,"time":6469},{"type":"click","x":0.293125,"y":0.2514571190674438,"time":6516},{"type":"position","x":0.293125,"y":0.2514571190674438,"time":6520},{"type":"position","x":0.293125,"y":0.2514571190674438,"time":6572}],"startTime":1453522358790,"seed":0.6470849202014506}
var events = allData.events;
Math.seedrandom(allData.seed);
var avatarSide = 60;
var width = 800;
var height = 600;
var margin = 10;
var leftMargin = width*0.05;
var x;
var y;
function scaleX(pos) {
	return Math.round(( (pos * width) + margin + leftMargin - (avatarSide/2)));
}
function scaleY(pos) {
	return (pos*height)-(avatarSide/2) + margin;
}
$(document).ready(function() {
	var i = 0;
	var setIntervalId;
	setIntervalId = setInterval(function() {
		if (i < events.length) {
			var e = events[i];
			y = scaleY(e.y);
			x = scaleX(e.x);
			if (e.type === "position") {
				$("#clickAvatar").hide();
				$("#mouseAvatar").show();
				$("#mouseAvatar").css({
					top: y,
					left: x
				});
			} else if (e.type === "click") {
				$("#mouseAvatar").hide();
				console.log("click");
				var clickedElement = $("#experiment").contents().get(0).elementFromPoint(x, y);
				$("#clickAvatar").show();
				$("#clickAvatar").css({
					top: y,
					left: x
				});
				clickedElement.click();
			}
			i++;
		} else {
			clearInterval(setIntervalId);
		}
	}, 50);
});