var events = [{"type":"position","x":0,"y":0,"time":70},{"type":"position","x":0,"y":0,"time":122},{"type":"position","x":0,"y":0,"time":173},{"type":"position","x":0,"y":0,"time":224},{"type":"position","x":0,"y":0,"time":275},{"type":"position","x":0,"y":0,"time":327},{"type":"position","x":0,"y":0,"time":378},{"type":"position","x":0,"y":0,"time":429},{"type":"position","x":0,"y":0,"time":480},{"type":"position","x":0,"y":0,"time":531},{"type":"position","x":0,"y":0,"time":583},{"type":"position","x":0,"y":0,"time":634},{"type":"position","x":0,"y":0,"time":685},{"type":"position","x":0,"y":0,"time":742},{"type":"position","x":0.2661150051061574,"y":0.04331753687155417,"time":793},{"type":"position","x":0.2973491459711332,"y":0.10496172395799665,"time":845},{"type":"position","x":0.3323313837399061,"y":0.16327379282355034,"time":897},{"type":"position","x":0.37231108404707514,"y":0.22658403902043722,"time":948},{"type":"position","x":0.3985477623736548,"y":0.2649033985606582,"time":999},{"type":"position","x":0.44227555958462095,"y":0.3248815265366563,"time":1051},{"type":"position","x":0.4860033567955871,"y":0.3698651225186549,"time":1101},{"type":"position","x":0.5047438413145725,"y":0.3865257136230988,"time":1153},{"type":"position","x":0.5059932069491716,"y":0.38819177273354316,"time":1204},{"type":"position","x":0.5059932069491716,"y":0.38819177273354316,"time":1255},{"type":"position","x":0.5059932069491716,"y":0.38819177273354316,"time":1306},{"type":"position","x":0.5047438413145725,"y":0.3865257136230988,"time":1358},{"type":"position","x":0.5022451100453745,"y":0.38319359540221,"time":1409},{"type":"position","x":0.5022451100453745,"y":0.3815275362917656,"time":1460},{"type":"position","x":0.5022451100453745,"y":0.3815275362917656,"time":1511},{"type":"position","x":0.5022451100453745,"y":0.3815275362917656,"time":1563},{"type":"position","x":0.5022451100453745,"y":0.3815275362917656,"time":1614},{"type":"position","x":0.5022451100453745,"y":0.3815275362917656,"time":1665},{"type":"position","x":0.5022451100453745,"y":0.3815275362917656,"time":1716},{"type":"position","x":0.5022451100453745,"y":0.3815275362917656,"time":1767},{"type":"position","x":0.5022451100453745,"y":0.3815275362917656,"time":1819},{"type":"position","x":0.5022451100453745,"y":0.3815275362917656,"time":1870},{"type":"position","x":0.5022451100453745,"y":0.3815275362917656,"time":1921},{"type":"position","x":0.5022451100453745,"y":0.3815275362917656,"time":1972},{"type":"position","x":0.5022451100453745,"y":0.3815275362917656,"time":2024},{"type":"position","x":0.5022451100453745,"y":0.3815275362917656,"time":2075},{"type":"position","x":0.5022451100453745,"y":0.3815275362917656,"time":2126},{"type":"position","x":0.5022451100453745,"y":0.3815275362917656,"time":2177},{"type":"position","x":0.5022451100453745,"y":0.3815275362917656,"time":2229},{"type":"position","x":0.5022451100453745,"y":0.3815275362917656,"time":2280},{"type":"position","x":0.5022451100453745,"y":0.3815275362917656,"time":2331},{"type":"position","x":0.5022451100453745,"y":0.3815275362917656,"time":2382},{"type":"position","x":0.5022451100453745,"y":0.3815275362917656,"time":2433},{"type":"position","x":0.5022451100453745,"y":0.3815275362917656,"time":2485},{"type":"position","x":0.5022451100453745,"y":0.3815275362917656,"time":2536},{"type":"position","x":0.5022451100453745,"y":0.3815275362917656,"time":2587},{"type":"position","x":0.5022451100453745,"y":0.3815275362917656,"time":2638},{"type":"position","x":0.5022451100453745,"y":0.3815275362917656,"time":2690},{"type":"position","x":0.5022451100453745,"y":0.3815275362917656,"time":2741},{"type":"click","x":0.5022451100453745,"y":0.3815275362917656,"time":2792},{"type":"click","x":0.5022451100453745,"y":0.3815275362917656,"time":2802},{"type":"position","x":0.5022451100453745,"y":0.3815275362917656,"time":2810},{"type":"position","x":0.5022451100453745,"y":0.3815275362917656,"time":2861},{"type":"position","x":0.5022451100453745,"y":0.3815275362917656,"time":2912},{"type":"position","x":0.5022451100453745,"y":0.3815275362917656,"time":2963},{"type":"position","x":0.5022451100453745,"y":0.3815275362917656,"time":3014},{"type":"position","x":0.5022451100453745,"y":0.3815275362917656,"time":3066},{"type":"position","x":0.5022451100453745,"y":0.3815275362917656,"time":3117},{"type":"position","x":0.5022451100453745,"y":0.38319359540221,"time":3168},{"type":"position","x":0.5022451100453745,"y":0.38319359540221,"time":3219},{"type":"position","x":0.5022451100453745,"y":0.38319359540221,"time":3270},{"type":"position","x":0.5022451100453745,"y":0.38319359540221,"time":3322},{"type":"position","x":0.5022451100453745,"y":0.3848596545126544,"time":3373},{"type":"position","x":0.49974637877617645,"y":0.38819177273354316,"time":3424},{"type":"position","x":0.49974637877617645,"y":0.39152389095443196,"time":3475},{"type":"position","x":0.49974637877617645,"y":0.39152389095443196,"time":3527},{"type":"position","x":0.49974637877617645,"y":0.39152389095443196,"time":3578},{"type":"position","x":0.4984970131415774,"y":0.39152389095443196,"time":3635},{"type":"position","x":0.48975145369938416,"y":0.39485600917532077,"time":3686},{"type":"position","x":0.4385274626808238,"y":0.39318995006487634,"time":3740},{"type":"position","x":0.3710617184124761,"y":0.3781954180708768,"time":3791},{"type":"position","x":0.3385782119129013,"y":0.35153847230376656,"time":3842},{"type":"position","x":0.3248351899323119,"y":0.2965585216591017,"time":3894},{"type":"position","x":0.3235858242977129,"y":0.2932264034382129,"time":3946},{"type":"position","x":0.3235858242977129,"y":0.2932264034382129,"time":3996},{"type":"position","x":0.3235858242977129,"y":0.2932264034382129,"time":4048},{"type":"click","x":0.3235858242977129,"y":0.2932264034382129,"time":4084},{"type":"position","x":0.3235858242977129,"y":0.2932264034382129,"time":4099},{"type":"position","x":0.3248351899323119,"y":0.2915603443277685,"time":4150},{"type":"position","x":0.3323313837399061,"y":0.29822458076954605,"time":4201},{"type":"position","x":0.35357059952808967,"y":0.31488517187398996,"time":4254},{"type":"position","x":0.3885528372968626,"y":0.33487788119932266,"time":4305},{"type":"position","x":0.4560185815652103,"y":0.35653664963509973,"time":4361},{"type":"position","x":0.5109906694875678,"y":0.3615348269664329,"time":4413},{"type":"position","x":0.5559678323331328,"y":0.35320453141421093,"time":4464},{"type":"position","x":0.6221842109668816,"y":0.3415421176411002,"time":4515},{"type":"position","x":0.6634132769086496,"y":0.3215494083157675,"time":4566},{"type":"position","x":0.6846524926968331,"y":0.29822458076954605,"time":4618},{"type":"position","x":0.6846524926968331,"y":0.29822458076954605,"time":4669},{"type":"position","x":0.6908993208698283,"y":0.2798979305546577,"time":4720},{"type":"position","x":0.6759069332546399,"y":0.27489975322332455,"time":4773},{"type":"position","x":0.6546677174664564,"y":0.27823187144421335,"time":4824},{"type":"position","x":0.6346778673128719,"y":0.28656216699643533,"time":4876},{"type":"position","x":0.6334285016782729,"y":0.2882282261068797,"time":4927},{"type":"position","x":0.6334285016782729,"y":0.2882282261068797,"time":4978},{"type":"position","x":0.6334285016782729,"y":0.2882282261068797,"time":5029},{"type":"click","x":0.6334285016782729,"y":0.2882282261068797,"time":5046},{"type":"position","x":0.6321791360436738,"y":0.2882282261068797,"time":5083},{"type":"position","x":0.6221842109668816,"y":0.29822458076954605,"time":5137},{"type":"position","x":0.5547184666985339,"y":0.3482063540828778,"time":5190},{"type":"position","x":0.5159881320259638,"y":0.3648669451873217,"time":5241},{"type":"position","x":0.4685122379112006,"y":0.344874235861989,"time":5292},{"type":"position","x":0.4335300001424277,"y":0.31488517187398996,"time":5343},{"type":"position","x":0.42978190323863064,"y":0.3098869945426568,"time":5400},{"type":"position","x":0.42228570943103644,"y":0.29822458076954605,"time":5451},{"type":"position","x":0.4135401499888432,"y":0.2932264034382129,"time":5502},{"type":"position","x":0.3885528372968626,"y":0.2898942852173241,"time":5553},{"type":"position","x":0.3835553747584664,"y":0.2915603443277685,"time":5605},{"type":"position","x":0.36481489023948094,"y":0.29489246254865725,"time":5656},{"type":"position","x":0.36481489023948094,"y":0.29489246254865725,"time":5708},{"type":"position","x":0.36481489023948094,"y":0.29489246254865725,"time":5759},{"type":"position","x":0.36481489023948094,"y":0.29489246254865725,"time":5810},{"type":"position","x":0.36481489023948094,"y":0.29489246254865725,"time":5861},{"type":"position","x":0.36481489023948094,"y":0.29489246254865725,"time":5913}]
var avatarSide = 60;
var width = 800;
var height = 600;
var margin = 10;
var leftMargin = width*0.05;
var x;
var y;
function scaleX(pos) {
	return Math.round(( (pos * width) + margin + leftMargin - (avatarSide/2)));
}
function scaleY(pos) {
	return (pos*height)-(avatarSide/2) + margin;
}
$(document).ready(function() {
	var i = 0;
	var setIntervalId;
	setIntervalId = setInterval(function() {
		if (i < events.length) {
			var e = events[i];
			y = scaleY(e.y);
			x = scaleX(e.x);
			if (e.type === "position") {
				$("#clickAvatar").hide();
				$("#mouseAvatar").show();
				$("#mouseAvatar").css({
					top: y,
					left: x
				});
			} else if (e.type === "click") {
				$("#mouseAvatar").hide();
				console.log("click");
				var clickedElement = $("#experiment").contents().get(0).elementFromPoint(x, y);
				$("#clickAvatar").show();
				$("#clickAvatar").css({
					top: y,
					left: x
				});
				clickedElement.click();
			}
			i++;
		} else {
			clearInterval(setIntervalId);
		}
	}, 50);
});